<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel=stylesheet><link rel=stylesheet type=text/css href=/css/style.css><title>HRPC</title><link rel=apple-touch-icon href=/favicons/apple-touch-icon.png><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=icon type=image/png href=/favicons/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=/favicons/android-chrome-512x512.png sizes=512x512><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=manifest href=/favicons/site.webmanifest><script async src="https://www.googletagmanager.com/gtag/js?id=UA-60127042-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-60127042-1');</script></head><body><div id=landing-content><div class=row><div class=topbannersub><nav class="navbar navbar-expand-md navbar-dark topnav"><a class=navbar-brand href=/><img src=/img/grpc-logo.png width=114 height=50></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="topnav, collapse navbar-collapse" id=navbarSupportedContent style=float:right!important><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/about/>About</a></li><li class="nav-item dropdown active"><a class="nav-link dropdown-toggle" href=/docs/ id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Docs</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/hrpc-docs/docs>Overview</a>
<a class=dropdown-item href=/hrpc-docs/docs/quickstart/>Quick Start</a>
<a class=dropdown-item href=/hrpc-docs/docs/guides/>Guides</a>
<a class=dropdown-item href=/hrpc-docs/docs/tutorials/>Tutorials</a>
<a class=dropdown-item href=/hrpc-docs/docs/reference/>Reference</a>
<a class=dropdown-item href=/hrpc-docs/docs/samples/>Samples</a>
<a class=dropdown-item href=/hrpc-docs/docs/talks>Presentations</a></div></li><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class=nav-item><a class=nav-link href=/community>Community</a></li><li class=nav-item><a class=nav-link href=https://packages.grpc.io/>Packages</a></li><li class=nav-item><a class=nav-link href=/faq/>FAQ</a></li></ul></div></nav><div class=headertext>Documentation</div></div></div></div><div class="subnav d-none d-md-block"><a href=/docs>Overview</a>
|
<a href=/hrpc-docs/docs/quickstart/>Quick Start</a>
|
<a href=/hrpc-docs/docs/guides/ class=active>Guides</a>
|
<a href=/hrpc-docs/docs/tutorials/>Tutorials</a>
|
<a href=/hrpc-docs/docs/reference/>Reference</a></div><div class=quickstartcols><div class=quickstartcol1><h8>Guides</h8>
<a href=/hrpc-docs/docs/guides/>What is HRPC?</a>
<a href=/hrpc-docs/docs/guides/concepts/ class=active>HRPC Concepts</a>
<a href=/hrpc-docs/docs/guides/auth/>Authentication</a>
<a href=/hrpc-docs/docs/guides/error/>Error handling and debugging</a>
<a href=/hrpc-docs/docs/guides/benchmarking/>Benchmarking</a>
<a href=https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-HTTP2.md>HRPC Wire Format</a>
<h8 style=margin-top:25%>Related Guides</h8>
<a href=https://developers.google.com/protocol-buffers/docs/overview>Protocol Buffers</a></div><div class=quickstartcol2 style=margin-top:4%><h3 style=margin-top:0>HRPC Concepts</h3><p class=lead>This document introduces some key HRPC concepts with an overview of HRPC's architecture and RPC life cycle.</p><p>It assumes that you've read <a href=/docs/guides>What is HRPC?</a>. For
language-specific details, see the Quick Start, tutorial, and reference
documentation for your chosen language(s), where available (complete reference
docs are coming soon).</p><h3 id=overview>Overview</h3><h4 id=service-definition>Service definition</h4><p>Like many RPC systems, HRPC is based around the idea of defining a service,
specifying the methods that can be called remotely with their parameters and
return types. By default, HRPC uses <a href=https://developers.google.com/protocol-buffers/>protocol
buffers</a> as the Interface
Definition Language (IDL) for describing both the service interface and the
structure of the payload messages. It is possible to use other alternatives if
desired.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=color:#66d9ef>service</span> HelloService {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>rpc</span> SayHello (HelloRequest) <span style=color:#66d9ef>returns</span> (HelloResponse);<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>HelloRequest</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> greeting <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>message</span> <span style=color:#a6e22e>HelloResponse</span> {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>  <span style=color:#66d9ef>string</span> reply <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>HRPC lets you define unary RPCs where the client sends a single request to the server and gets a
single response back, just like a normal function call.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-proto data-lang=proto><span style=color:#66d9ef>rpc</span> SayHello(HelloRequest) <span style=color:#66d9ef>returns</span> (HelloResponse){<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>}<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>HRPC doesn't support any of gRPC's streaming methods.</p><h4 id=using-the-api-surface>Using the API surface</h4><p>Starting from a service definition in a .proto file, HRPC provides protocol
buffer compiler plugins that generate client- and server-side code. HRPC users
typically call these APIs on the client side and implement the corresponding API
on the server side.</p><ul><li>On the server side, the server implements the methods declared by the service
and runs a HRPC server to handle client calls. The HRPC infrastructure decodes
incoming requests, executes service methods, and encodes service responses.</li><li>On the client side, the client has a local object known as <em>stub</em> (for some
languages, the preferred term is <em>client</em>) that implements the same methods as
the service. The client can then just call those methods on the local object,
wrapping the parameters for the call in the appropriate protocol buffer
message type - HRPC looks after sending the request(s) to the server and
returning the server's protocol buffer response(s).</li></ul><h4 id=synchronous-vs-asynchronous>Synchronous vs. asynchronous</h4><p>Synchronous RPC calls that block until a response arrives from the server are
the closest approximation to the abstraction of a procedure call that RPC
aspires to. On the other hand, networks are inherently asynchronous and in many
scenarios it's useful to be able to start RPCs without blocking the current
thread.</p><p>The HRPC programming surface in most languages comes in both synchronous and
asynchronous flavors. You can find out more in each language's tutorial and
reference documentation (complete reference docs are coming soon).</p><h3 id=rpc-life-cycle>RPC life cycle</h3><p>Now let's take a closer look at what happens when a HRPC client calls a HRPC
server method. We won't look at implementation details, you can find out more
about these in our language-specific pages.</p><h4 id=unary-rpc>Unary RPC</h4><p>First let's look at the simplest type of RPC, where the client sends a single request and gets back a single response.</p><ul><li>Once the client calls the method on the stub/client object, the server is
notified that the RPC has been invoked with the client's <a href=#metadata>metadata</a>
for this call, the method name, and the specified <a href=#deadlines>deadline</a> if
applicable.</li><li>The server can then either send back its own initial metadata (which must be
sent before any response) straight away, or wait for the client's request
message - which happens first is application-specific.</li><li>Once the server has the client's request message, it does whatever work is
necessary to create and populate its response. The response is then returned
(if successful) to the client together with status details (status code and
optional status message) and optional trailing metadata.</li><li>If the status is OK, the client then gets the response, which completes the
call on the client side.</li></ul><h4 id=deadlinestimeouts>Deadlines/Timeouts</h4><p>TODO.
HRPC should allow clients to specify how long they are willing to wait for an RPC to
complete before the RPC is terminated with the error <code>DEADLINE_EXCEEDED</code>. On
the server side, the server can query to see if a particular RPC has timed out,
or how much time is left to complete the RPC.</p><p>How the deadline or timeout is specified varies from language to language - for
example, not all languages have a default deadline, some language APIs work in
terms of a deadline (a fixed point in time), and some language APIs work in
terms of timeouts (durations of time).</p><h4 id=rpc-termination>RPC termination</h4><p>In HRPC, both the client and server make independent and local determinations of
the success of the call, and their conclusions may not match. This means that,
for example, you could have an RPC that finishes successfully on the server side
(&ldquo;I have sent all my responses!") but fails on the client side (&ldquo;The responses
arrived after my deadline!"). It's also possible for a server to decide to
complete before a client has sent all its requests.</p></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>